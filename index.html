<html>
<head>
    <!-- <script type="module" src="./crops.js"></script> -->
    <!-- <script src="https://d3js.org/d3.v6.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="./sunHavenProfitCalculator.js"></script>
    <link rel="stylesheet" href="./styles.css" />

    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/images/favicon/site.webmanifest">
    <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/images/favicon/favicon.ico">

    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
    <meta name="theme-color" content="#606060">
    <meta name="google-site-verification" content="5_SDo4lyZ8ElkRBGCsvCSMaoEbSOkE58hyfxXsCLVz4" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Sun Haven Crop Calculator</title>
</head>
<body style="background-image: url('./images/assets/background.webp');">
<div class="title-image-container">
    <img class="title-image" src='./images/withBG.png' alt="title image Sun Haven Crop Calculator"/>
</div>
<form class="configs-form">
    <div class="configs-container">
        <div class="configs content-box">
            <p>Confused? Check the README to see <a class="footer-link" target="_blank" href="https://github.com/8-bit-toolkit/Sun-Haven-Profit-Calculator?tab=readme-ov-file#how-to-use">how to use this calculator</a></p>
            <div class="configs-columns-container">
                <div class="configs-column">
                    <div class="configs__config crops-region">
                        <label class="config-label" for="cropsRegionSelect">
                            What region's crops do you want to calculate?
                        </label>
                        <select class="config-select crops-region-select" name="cropsRegionSelect" id="cropsRegionSelect">
                            <option value="sunHaven" selected>Sun Haven</option>
                            <option value="nelvari">Nel'Vari</option>
                            <option value="withergate">Withergate</option>
                        </select>
                    </div>
                    <div class="configs__config planting-date">
                            <label class="config-label" for="plantingDaySelect">
                                What day are you planting?
                            </label>
                            <select class="config-select planting-day-select" name="plantingDaySelect" id="plantingDaySelect">
                                <option value="1" selected>1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                            </select>
                            <select class="config-select planting-season-select">
                                <option value="0" selected>Spring</option>
                                <option value="1">Summer</option>
                                <option value="2">Fall</option>
                                <option value="3">Winter</option>
                            </select>
                        </div>
                    <div class="configs__config days-amount">
                            <label class="config-label" for="daysAmountInput">
                                How Many Days should the calculator run for?
                            </label>
                            <input type="number" class="days-amount-input" min="1" max="999" value="1" name="daysAmountInput" id="daysAmountInput"/>
                        </div>
                    <div class="configs__config crops-amount">
                        <label class="config-label" for="cropsAmountInput">
                            How Many Crops Will You Plant?
                        </label>
                        <input type="number" class="crops-amount-input" min="1" max="999" value="1" name="cropsAmountInput" id="cropsAmountInput"/>
                    </div>
                </div>
                <div class="configs-column">
                    <div class="configs__config tiller-tip">
                        <label class="config-label" for="tillerTipSelect">
                            Tiller Tip Level? (provides 0 / 4 / 7 / 10 extra gold per crop sold)
                        </label>
                        <select class="config-select tiller-tip-select" name="tillerTipSelect" id="tillerTipSelect">
                            <option value="0" selected>0</option>
                            <option value="4">1</option>
                            <option value="7">2</option>
                            <option value="10">3</option>
                        </select>
                    </div>
                    <div class="configs__config propagation">
                        <label class="config-label" for="propagationSelect">
                            Propagation Level? (provides 0% / 4% / 6% / 8% chance of an extra crop when harvesting)
                        </label>
                        <select class="config-select propagation-select" name="propagationSelect" id="propagationSelect">
                            <option value="0" selected>0</option>
                            <option value="0.04">1</option>
                            <option value="0.06">2</option>
                            <option value="0.08">3</option>
                        </select>
                    </div>
                    <div class="configs__config fertile-land">
                        <label class="config-label" for="fertileLandSelect">
                            Fertile Land Level? (provides 0% / 4% / 8% / 12% chance of an extra crop when harvesting crops that are fertilized)
                        </label>
                        <select class="config-select fertile-land-select" name="fertileLandSelect" id="fertileLandSelect">
                            <option value="0" selected>0</option>
                            <option value="0.04">1</option>
                            <option value="0.08">2</option>
                            <option value="0.12">3</option>
                        </select>
                    </div>
                    <div class="configs__config ignore">
                        <div class="ignore__config checkbox-input ignore-seasons">
                            <input type="checkbox" class="ignore-seasons-input" name="ignoreSeasons" id="ignoreSeasons"/>
                            <label class="config-label checkbox-label" for="ignoreSeasons">
                                Ignore Seasons (Check this if determining profits for a greenhouse setting where seasons will not change)
                            </label>
                        </div>
                        <div class="ignore__config checkbox-input ignore-grapes">
                            <input type="checkbox" class="ignore-grapes-input" name="ignoreGrapes" id="ignoreGrapes" />
                            <label class="config-label checkbox-label" for="ignoreGrapes">
                                Exclude Grapes (Check this if you want to exclude Grapes from the calculator - Grapes cost daily mana to grow)
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="configs__config fertilizer">
                <label class="config-label" for="fertilizerSelect">
                    Select Fertilizer:
                </label>
                <select class="config-select fertilizer-select" name="fertilizerSelect" id="fertilizerSelect">
                    <option value="none" selected>No Fertilizer</option>
                    <option value="slime">Slime (5% extra crop chance when harvested)</option>
                    <option value="simpleFire">Simple Fire (30% increased growth speed)</option>
                    <option value="simpleEarth">Simple Earth (15% extra crop chance when harvested)</option>
                    <option value="simpleMagic">Simple Magic (15% extra crop chance when harvested, 30% increased growth speed)</option>
                    <option value="advFire">Advanced Fire (50% increased growth speed)</option>
                    <option value="advEarth">Advanced Earth (25% extra crop chance when harvested)</option>
                    <option value="advMagic">Advanced Magic (25% extra crop chance when harvested, 50% increased growth speed)</option>
                    <option value="other">Other (Other fertilizers still affect profit/xp by triggering "Fertile land" skill)</option>
                </select>
            </div>
            <div class="configs__config totem">
                <fieldset class="totem-fieldset">
                    <legend>
                        Select Totems:
                    </legend>
                    <ul class="totem-list">
                        <li class="checkbox-input">
                            <input type="checkbox" class="fire-fertilizer-totem-input" name="fireFertilizerTotem" id="fireFertilizerTotem" />
                            <label class="config-label checkbox-label" for="fireFertilizerTotem">
                                Fire Fertilizer Totem (15% increased growth speed)
                            </label>
                        </li>
                        <li class="checkbox-input">
                            <input type="checkbox" class="spring-totem-input" name="springTotem" id="springTotem" />
                            <label class="config-label checkbox-label" for="springTotem">
                                Spring Totem (4% extra crop chance when harvested)
                            </label>
                        </li>
                        <li class="checkbox-input">
                            <input type="checkbox" class="farming-totem-input" name="farmingTotem" id="farmingTotem" />
                            <label class="config-label checkbox-label" for="farmingTotem">
                                Farming Totem (Extra 2 farming xp per harvest)
                            </label>
                        </li>
                    </ul>
                </fieldset>
            </div>
        </div>
    </div>
    <div class="submit-container">
        <button class="submit-button grid-button">
            Generate Graph
        </button>
    </div>
</form>

<div class="graph-wrapper">
    <div class="graph-sort-wrapper">
        <div class="graph-sort-container">
            <label class="sort-label" for="graphSort">
                Sort By
            </label>
            <select class="config-select sort-select" name="graphSort" id="graphSort">
                <option value="totalProfit" selected>Total Profit (Gross Sales - Seed Price)</option>
                <option value="grossSales">Gross Sales</option>
                <option value="costOfSeeds">Cost Of Seeds</option>
                <option value="experienceGained">Farming Experience Gained</option>
                <option value="roi">ROI (Return On Investment)</option>
                <option value="dailyROI">Daily ROI</option>
                <option value="harvests">Number Of Harvests</option>
                <option value="numberOfCropsHarvested">Total Crops Harvested</option>
            </select>
        </div>
    </div>
    <div class="graph-container">
        <div id="my_dataviz"></div>
    </div>
</div>

<div class="disclaimers-container">
    <div class="disclaimers content-box">
        <p class="disclaimers__assumptions">
            This calculator assumes:
        </p>
        <ul>
            <li class="disclaimer">
                You are not processing crops into seeds and replanting them
            </li>
            <li class="disclaimer">
                You are buying seeds at their normal price (no sales/discounts)
            </li>
            <li class="disclaimer">
                Crops are harvested immediately when grown, then the same amount are replanted the same day
            </li>
            <li class="disclaimer">
                Fertilizers and Totems can have stacking effects, but multiple Totems with similar effects do not stack.
            </li>
            <li class="disclaimer">
                Any specified Fertilizer or Totems affect ALL crops in the calculation
            </li>
            <li class="disclaimer">
                Fertilizers and Totems applied to crops that regrow, only affect the INITIAL harvest, not subsequent ones (I've personally confirmed this for "growth rate" fertilizers/totems, but need dev confirmation for "extra crop chance" fertilizers/totems)
            </li>
            <li class="disclaimer">
                A crop that regrows that has been fertilized will NO LONGER activate the "Fertile Land" skill after its first harvest, even if it still appears to be fertilized (need dev confirmation on this)
            </li>
            <li class="disclaimer">
                When determining crop growth speed and extra harvest chance: any relevant Skills, Totems, or Fertilizers have their effects applied to the base crop numbers in an additive manner rather than multiplicative
            </li>
            <li class="disclaimer">
                This calculator determines an AVERAGE profit. Many skills/totems/fertilizers give a "chance" to get extra crops, so your personal results may differ from these averages.
            </li>
        </ul>
    </div>
</div>
<div class="footer-container">
    <p class="footer-text">Website Design/Development Powered By: <a class="footer-link" target="_blank" href="https://linktr.ee/8.bit.toolkit">8-Bit-Toolkit</a> - Sun Haven v1.4 property of <a class="footer-link" target="_blank" href="https://linktr.ee/PixelSproutStudios">Pixel Sprout Studios</a></p>
    <p class="footer-text">Please send questions, requests, suggestions to <a class="footer-link" href="mailto:8.bit.toolkit@gmail.com?subject=WEBSITE mail">8.bit.toolkit@gmail.com</a> or contribute directly to the <a target="_blank" href="https://github.com/8-bit-toolkit/Sun-Haven-Profit-Calculator" class="footer-link">Github Repo</a>.</p>
    <p class="footer-text">Crop/Skill/Fertilizer/Totem information sourced from the <a class="footer-link" target="_blank" href="https://sunhaven.wiki.gg/wiki/Sun_Haven_Wiki">Community Wiki</a>.</p>
</div>

<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "1535ed9f99b742a185e5d675660e7961"}'></script><!-- End Cloudflare Web Analytics -->

</body>
</html>